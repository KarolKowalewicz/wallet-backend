{"openapi":"3.0.0","info":{"title":"Wallet App API","version":"1.0.0"},"paths":{"/api/transactions":{"post":{"summary":"Add new transaction.","description":"Add new transaction. Category must be sent only when income is set to false - category is meant only for expenses. Date needs to be provided in ISO 8601 format, for example 2023-10-08.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"amount":{"type":"integer","example":283},"comment":{"type":"string"},"date":{"type":"string","example":"2023-10-04"},"income":{"type":"boolean","example":false},"category":{"type":"string","example":"Main expenses"}}}}}},"responses":{"201":{"description":"Transaction successfully added.","content":{"application/json":{"schema":{"type":"object","properties":{"income":{"type":"boolean","example":false},"amount":{"type":"integer","example":283},"category":{"type":"string","example":"Main expenses"},"comment":{"type":"string"},"date":{"type":"string","example":"2023-10-04T00:00:00.000Z"},"owner":{"type":"string","example":"65218dd28c2649602207d72d"},"_id":{"type":"string","example":"6521d6205d23f3d86f9d6e4b"},"__v":{"type":"integer","example":0}}}}}},"400":{"description":"Body failed validation check.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Error message."},"code":{"type":"integer","example":400}}}}}},"401":{"description":"Unauthorized. User not authorized.","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"code":{"type":"integer","example":401},"message":{"type":"string","example":"Not authorized"}}}}}},"500":{"description":"Internal Server Error.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Server error."}}}}}}}},"get":{"summary":"Get all transactions belonging to the user.","description":"Get all transactions belonging to the user.","responses":{"201":{"description":"Transactions successfully sent to client. statiststic.balance represents user's overall balance.","content":{"application/json":{"schema":{"type":"object","properties":{"statistics":{"type":"object","properties":{"incomeSum":{"type":"integer","example":0},"expenseSum":{"type":"integer","example":2250},"balance":{"type":"integer","example":-2250},"expenseStatistics":{"type":"object","properties":{"Main expenses":{"type":"integer","example":0},"Products":{"type":"integer","example":0},"Car":{"type":"integer","example":0},"Self care":{"type":"integer","example":0},"Household products":{"type":"integer","example":0},"Education":{"type":"integer","example":0},"Leisure":{"type":"integer","example":2250}}},"period":{"type":"string","example":"allTime"}}},"transactions":{"type":"object","properties":{"count":{"type":"integer","example":10},"data":{"type":"array","items":{"type":"object"}}}}}}}}},"400":{"description":"There are no transactions.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"There are no transactions. Bad request."},"code":{"type":"integer","example":400}}}}}},"401":{"description":"Unauthorized. User not authorized.","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"code":{"type":"integer","example":401},"message":{"type":"string","example":"Not authorized"}}}}}},"500":{"description":"Internal Server Error.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Server error."}}}}}}}}},"/api/transactions/categories":{"get":{"summary":"Get all categories of expenses accepted by api.","description":"Get all categories of expenses accepted by api. Does not require authentification.","responses":{"200":{"description":"Array of categories is sent back from api.","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"},"example":["Main expenses","Products","Car","Self care","Household products","Education","Leisure"]}}}},"500":{"description":"Server error.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","enum":["Server error"]}}}}}}}}},"/api/transactions/:transactionId":{"get":{"summary":"Get specific trsansaction based on its id.","description":"Get specific trsansaction based on its id.","parameters":[{"in":"path","name":"transactionId","required":true,"schema":{"type":"string","example":"652066235a8c495860f6462f","description":"Transaction id"}}],"responses":{"201":{"description":"Requested transaction sent back to client.","content":{"application/json":{"schema":{"type":"object","properties":{"income":{"type":"boolean","example":false},"amount":{"type":"integer","example":283},"category":{"type":"string","example":"Main expenses"},"comment":{"type":"string"},"date":{"type":"string","example":"2023-10-04T00:00:00.000Z"},"owner":{"type":"string","example":"65218dd28c2649602207d72d"},"_id":{"type":"string","example":"652066235a8c495860f6462f"},"__v":{"type":"integer","example":0}}}}}},"400":{"description":"No transaction with such id.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"No transaction with such id. Bad request."},"code":{"type":"integer","example":400}}}}}},"401":{"description":"Unauthorized. User not authorized.","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"code":{"type":"integer","example":401},"message":{"type":"string","example":"Not authorized"}}}}}},"500":{"description":"Internal Server Error.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Server error."}}}}}}}},"delete":{"summary":"Delete specific trsansaction based on its id.","description":"Delete specific trsansaction based on its id.","parameters":[{"in":"path","name":"transactionId","required":true,"schema":{"type":"string","example":"652066235a8c495860f6462f","description":"Transaction id"}}],"responses":{"201":{"description":"Requested transaction deleted. Returns deleted document.","content":{"application/json":{"schema":{"type":"object","properties":{"income":{"type":"boolean","example":false},"amount":{"type":"integer","example":283},"category":{"type":"string","example":"Main expenses"},"comment":{"type":"string"},"date":{"type":"string","example":"2023-10-04T00:00:00.000Z"},"owner":{"type":"string","example":"65218dd28c2649602207d72d"},"_id":{"type":"string","example":"652066235a8c495860f6462f"},"__v":{"type":"integer","example":0}}}}}},"400":{"description":"No transaction with such id. Bad request.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"No transaction with such id. Bad request."},"code":{"type":"integer","example":400}}}}}},"401":{"description":"Unauthorized. User not authorized.","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"code":{"type":"integer","example":401},"message":{"type":"string","example":"Not authorized"}}}}}},"500":{"description":"Internal Server Error.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Server error."}}}}}}}},"put":{"summary":"Update transaction details.","description":"Update transaction details.","parameters":[{"in":"path","name":"transactionId","required":true,"schema":{"type":"string","example":"652066235a8c495860f6462f","description":"Transaction id"}}],"requestBody":{"required":true,"description":"At least one of the fields in request body is required.","content":{"application/json":{"schema":{"type":"object","properties":{"amount":{"type":"integer","example":283},"comment":{"type":"string"},"date":{"type":"string","example":"2023-10-04"},"income":{"type":"boolean","example":false},"category":{"type":"string","example":"Main expenses"}}}}}},"responses":{"201":{"description":"Requested transaction has been updated. Returns updated document.","content":{"application/json":{"schema":{"type":"object","properties":{"income":{"type":"boolean","example":false},"amount":{"type":"integer","example":283},"category":{"type":"string","example":"Main expenses"},"comment":{"type":"string"},"date":{"type":"string","example":"2023-10-04T00:00:00.000Z"},"owner":{"type":"string","example":"65218dd28c2649602207d72d"},"_id":{"type":"string","example":"652066235a8c495860f6462f"},"__v":{"type":"integer","example":0}}}}}},"400":{"description":"No transaction with such id or body failed validation check. Bad request.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"No transaction with such id. Bad request."},"code":{"type":"integer","example":400}}}}}},"401":{"description":"Unauthorized. User not authorized.","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"code":{"type":"integer","example":401},"message":{"type":"string","example":"Not authorized"}}}}}},"500":{"description":"Internal Server Error.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Server error."}}}}}}}}},"/api/transactions/statistics/:month":{"get":{"summary":"Check statistic or given month.","description":"Check statistic or given month.","parameters":[{"in":"path","name":"month","required":true,"schema":{"type":"string","example":"2023-10","description":"Requested month of statistics."}}],"responses":{"201":{"description":"Transactions successfully sent to client. Array with transaction obejcts in transactions.data.","content":{"application/json":{"schema":{"type":"object","properties":{"statistics":{"type":"object","properties":{"incomeSum":{"type":"integer","example":0},"expenseSum":{"type":"integer","example":2250},"balance":{"type":"integer","example":-2250},"expenseStatistics":{"type":"object","properties":{"Main expenses":{"type":"integer","example":0},"Products":{"type":"integer","example":0},"Car":{"type":"integer","example":0},"Self care":{"type":"integer","example":0},"Household products":{"type":"integer","example":0},"Education":{"type":"integer","example":0},"Leisure":{"type":"integer","example":2250}},"period":{"type":"string","example":"allTime"}},"period":{"type":"string","example":"2023-10"}}},"transactions":{"type":"object","properties":{"count":{"type":"integer","example":10},"data":{"type":"array","items":{"type":"object"}}}}}}}}},"400":{"description":"There are no transactions.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"There are no transactions. Bad request."},"code":{"type":"integer","example":400}}}}}},"401":{"description":"Unauthorized. User not authorized.","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"code":{"type":"integer","example":401},"message":{"type":"string","example":"Not authorized"}}}}}},"500":{"description":"Internal Server Error.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Server error."}}}}}}}}},"/api/users/register":{"post":{"summary":"Register a new user","description":"Register a new user with the provided email, password, and name.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"name":{"type":"string"}}}}}},"responses":{"201":{"description":"User successfully registered.","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"}}}}}}}},"409":{"description":"Conflict. Email is already in use.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"500":{"description":"Internal Server Error.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}}}}},"/api/users/login":{"post":{"summary":"Login a user","description":"Authenticate a user with the provided email and password.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"201":{"description":"User successfully registered.","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"token":{"type":"string"}}}}}}}},"400":{"description":"Bad request. Incorrect login or password.","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["error"]},"code":{"type":"integer","example":400},"message":{"type":"string"},"data":{"type":"string"}}}}}}}}},"/api/users/logout":{"post":{"summary":"Logout a user","description":"Logout the currently authenticated user.","responses":{"204":{"description":"User successfully logged out."},"401":{"description":"Unauthorized. User not authorized."},"500":{"description":"Internal Server Error."}}}},"/api/users/current":{"get":{"summary":"Get current user profile","description":"Retrieve the profile of the currently authenticated user.","responses":{"200":{"description":"Current user profile successfully retrieved.","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"}}}}}},"401":{"description":"Unauthorized. User not authorized."},"500":{"description":"Internal Server Error."}}}}},"components":{"schemas":{"Transaction":{"type":"object","properties":{"amount":{"type":"integer","example":135},"comment":{"type":"string"},"date":{"type":"string","description":"Date should be ISO 8601 format, e.g. 2023-10-06"},"income":{"type":"boolean","example":false,"description":"True for income transactions, false for expenses."},"category":{"type":"string","example":"Leisure","description":"Optional, must be used only when income is false.","enum":["Main expenses","Products","Car","Self care","Household products","Education","Leisure"]}}},"User":{"type":"object","properties":{"email":{"type":"string","description":"Email address of the user."},"password":{"type":"string","description":"Hashed password of the user."},"name":{"type":"string","description":"Name of the user."},"token":{"type":"string","description":"JWT token associated with the user (optional)."}}}}},"tags":[]}